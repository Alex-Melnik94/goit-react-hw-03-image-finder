{"version":3,"sources":["ImageGalleryItem-ui/ImageGalleryItem.module.css","Modal-ui/Modal.module.css","Button-ui/button.module.css","Searchbar-ui/Searchbar.js","ImageGalleryItem-ui/ImageGalleryItem.js","Button-ui/Button.js","Modal-ui/Modal.js","ImageGallery-ui/ImageGallery.js","App.js","index.js","Searchbar-ui/Searchbar.module.css","ImageGallery-ui/ImageGallery.module.css"],"names":["module","exports","Searchbar","state","searchQuery","handleQueryChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","className","styles","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","images","onClick","map","id","webformatURL","tags","src","alt","ImageGalleryItemImage","Button","modalRoot","document","querySelector","Modal","onEscCloseModal","code","openModal","onCloseModal","target","window","addEventListener","removeEventListener","modalImg","createPortal","Overlay","largeImageURL","ImageGallery","page","status","loader","handleBtnClick","prevState","showModal","onImgClick","imgForModal","find","image","fetchImages","query","fetch","then","res","ok","json","Promise","reject","Error","hits","length","toast","error","catch","finally","scroll","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","initialPage","container","color","height","width","autoClose","PureComponent","App","handleFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2fee6dfc.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2_-Wr\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__VGmXd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2btH1\",\"Modal\":\"Modal_Modal__1wGkG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"button_Button__mGynk\"};","import { Component } from 'react';\nimport styles from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleQueryChange = e => {\n    this.setState({ searchQuery: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    if (this.state.searchQuery.trim() === '') {\n      return;\n    }\n    this.props.onSubmit(this.state.searchQuery);\n    this.setState({ searchQuery: '' });\n  };\n\n  render() {\n    return (\n      <header className={styles.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={styles.SearchForm}>\n          <button type=\"submit\" className={styles.SearchFormButton}>\n            <span className={styles.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={styles.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.searchQuery}\n            onChange={this.handleQueryChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import React from 'react';\nimport styles from './ImageGalleryItem.module.css';\nimport PropTypes from 'prop-types';\n\nconst ImageGalleryItem = ({ images, onClick }) => {\n  return images.map(({ id, webformatURL, tags }) => {\n    return (\n      <li\n        key={id}\n        className={styles.ImageGalleryItem}\n        onClick={() => {\n          onClick(id);\n        }}\n      >\n        <img\n          src={webformatURL}\n          alt={tags}\n          className={styles.ImageGalleryItemImage}\n        />\n      </li>\n    );\n  });\n};\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.array.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport styles from './button.module.css';\nimport PropTypes from 'prop-types';\n\nconst Button = ({ onClick }) => {\n  return (\n    <button type=\"button\" onClick={onClick} className={styles.Button}>\n      Load more\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.onEscCloseModal);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onEscCloseModal);\n  }\n\n  onEscCloseModal = e => {\n    if (e.code === 'Escape') {\n      this.props.openModal();\n    }\n  };\n\n  onCloseModal = e => {\n    if (e.currentTarget === e.target) {\n      this.props.openModal();\n    }\n  };\n\n  render() {\n    const { modalImg } = this.props;\n    return createPortal(\n      <div className={styles.Overlay} onClick={this.onCloseModal}>\n        <div className={styles.Modal}>\n          <img src={modalImg.largeImageURL} alt={modalImg.tags} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import { PureComponent } from 'react';\nimport styles from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem-ui/ImageGalleryItem';\nimport Loader from 'react-loader-spinner';\nimport Button from '../Button-ui/Button';\nimport Modal from '../Modal-ui/Modal';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default class ImageGallery extends PureComponent {\n  state = {\n    images: [],\n    page: 1,\n    status: 'idle',\n    loader: false,\n    openModal: false,\n    modalImg: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { query, initialPage } = this.props;\n    const { page } = this.state;\n\n    if (query !== prevProps.query) {\n      this.setState({ images: [], page: 1, loader: true });\n      this.fetchImages(query, initialPage);\n    }\n\n    if (this.state.page > prevState.page) {\n      this.fetchImages(query, page);\n    }\n  }\n\n  handleBtnClick = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n      loader: true,\n    }));\n  };\n\n  showModal = () => {\n    this.setState(prevState => {\n      return { openModal: !prevState.openModal };\n    });\n  };\n\n  onImgClick = id => {\n    const { images } = this.state;\n    const imgForModal = images.find(image => image.id === id);\n    this.setState({ modalImg: imgForModal });\n    this.showModal();\n  };\n\n  fetchImages = (query, page) => {\n    const URL = 'https://pixabay.com/api/';\n    const API_KEY = '21964701-aaf906e928d661c46acce114f';\n\n    return fetch(\n      `${URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n    )\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(new Error('Some proplems with server'));\n      })\n      .then(res => {\n        const { hits } = res;\n        if (hits.length === 0) {\n          toast.error('Nothing was found for your query.');\n        }\n        this.setState(prevState => ({\n          status: 'resolved',\n          images: [...prevState.images, ...hits],\n        }));\n      })\n      .catch(() => {\n        this.setState({ status: 'rejected' });\n      })\n      .finally(() => {\n        this.setState({ loader: false });\n        if (this.state.images.length > 12) {\n          this.scroll();\n        }\n      });\n  };\n\n  scroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  render() {\n    const { status, images, loader, openModal, modalImg } = this.state;\n\n    return (\n      <div className={styles.container}>\n        {status === 'idle' && null}\n\n        {status === 'resolved' ? (\n          <div className={styles.container}>\n            <ul className={styles.ImageGallery}>\n              <ImageGalleryItem images={images} onClick={this.onImgClick} />\n            </ul>\n            {images.length >= 12 && loader === false ? (\n              <Button onClick={this.handleBtnClick} />\n            ) : null}\n          </div>\n        ) : null}\n\n        {loader && (\n          <Loader type=\"ThreeDots\" color=\"#FF0000\" height={100} width={100} />\n        )}\n\n        {status === 'rejected' && toast.error('Some proplems with server')}\n\n        {openModal && <Modal openModal={this.showModal} modalImg={modalImg} />}\n\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n","import { Component } from 'react';\nimport Searchbar from './Searchbar-ui/Searchbar';\nimport ImageGallery from './ImageGallery-ui/ImageGallery';\nimport styles from './styles.css';\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n    page: 1,\n  };\n\n  handleFormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    const { searchQuery, page } = this.state;\n    return (\n      <div className={styles.App}>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery query={searchQuery} initialPage={page} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3k_Hk\",\"SearchForm\":\"Searchbar_SearchForm__2DKDA\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3Z6XG\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__3FvmH\",\"SearchFormInput\":\"Searchbar_SearchFormInput__Xb7xN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__jouaJ\",\"container\":\"ImageGallery_container__24qEt\"};"],"sourceRoot":""}